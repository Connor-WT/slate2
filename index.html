
<!doctype html>
<html>
  <head>
     <link href="images/favicon-0bc6ca0b.ico" rel="icon" type="image/ico" />
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #1fe810;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #1fe810;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #ff45b8;
}
.highlight .gr {
  color: #ff45b8;
}
.highlight .gt {
  color: #ff45b8;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #00eeff;
}
.highlight .kd {
  color: #00eeff;
}
.highlight .kr {
  color: #00eeff;
}
.highlight .no {
  color: #00eeff;
}
.highlight .kt {
  color: #00eeff;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #8EC641;
}
.highlight .s2 {
  color: #8EC641;
}
.highlight .sb {
  color: #8EC641;
}
.highlight .sh {
  color: #8EC641;
}
.highlight .si {
  color: #8EC641;
}
.highlight .sx {
  color: #8EC641;
}
.highlight .s1 {
  color: #8EC641;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #8EC641;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #00eeff;
}
.highlight .ow {
  color: #00eeff;
}
.highlight .nt {
  color: #00eeff;
}
.highlight .k, .highlight .kv {
  color: #00eeff;
}
.highlight .kn {
  color: #00eeff;
}
.highlight .kp {
  color: #00eeff;
}
.highlight .o {
  color: #00eeff;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sa, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-c7d94008.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-b7529e25.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-e9bde216.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;Python3&quot;,&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-27870101.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="Python3">Python3</a>
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder= "Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#restrictions" class="toc-h2 toc-link" data-title="Restrictions">Restrictions</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-new-user-account" class="toc-h2 toc-link" data-title="Create New User Account">Create New User Account</a>
                  </li>
                  <li>
                    <a href="#obtain-access-token" class="toc-h2 toc-link" data-title="Obtain Access Token">Obtain Access Token</a>
                  </li>
                  <li>
                    <a href="#password-reset" class="toc-h2 toc-link" data-title="Password Reset">Password Reset</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#grid-emissions-information" class="toc-h1 toc-link" data-title="Grid Emissions Information">Grid Emissions Information</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#determine-grid-region" class="toc-h2 toc-link" data-title="Determine Grid Region">Determine Grid Region</a>
                  </li>
                  <li>
                    <a href="#realtime-emissions" class="toc-h2 toc-link" data-title="Realtime Emissions">Realtime Emissions</a>
                  </li>
                  <li>
                    <a href="#grid-data" class="toc-h2 toc-link" data-title="Grid Data">Grid Data</a>
                  </li>
                  <li>
                    <a href="#historical-emissions" class="toc-h2 toc-link" data-title="Historical Emissions">Historical Emissions</a>
                  </li>
                  <li>
                    <a href="#marginal-emissions-forecast" class="toc-h2 toc-link" data-title="Marginal Emissions Forecast">Marginal Emissions Forecast</a>
                  </li>
              </ul>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>WattTime technology—based on real-time grid data, cutting-edge algorithms, and machine learning—provides first-of-its-kind insight into your local electricity grid’s marginal emissions rate. </p>

<p>The WattTime API provides access to real-time, forecast, and historical marginal emissions data for electric grids around the world. For a deeper understanding of these Marginal Operating Emissions Rates (MOERs) please see <a href="https://www.watttime.org/aer/what-is-aer/" target="_blank">What is AER</a> <a href="https://www.watttime.org/aer/what-is-aer/">What is AER</a> and <a href="https://www.watttime.org/aer/how-aer-works/">How AER works</a>.</p>

<p>You can access the API by sending standard HTTP requests to the endpoints listed below. </p>

<p>The <code>/data</code>, <code>/historical</code>, and <code>/forecast</code> endpoints are only available to subscribers. ANALYST and PRO data plans can be found <a href="https://www.watttime.org/get-the-data/data-plans/">here</a>.</p>

<p>For (Python3) example code that can be used to register, log in, and query data, please see our <a href="https://github.com/WattTime/apiv2-example/blob/master/query_apiv2.py">example code</a>.</p>
<h3 id='restrictions'>Restrictions</h3>
<p>There are strict limits on the number of connections and rates at which you may query the API. From any single IP address you may make a maximum of 10 connections, and may have up to 100 outstanding queries that will be rate limited to 10 requests per second. If there are more than 100 requests outstanding, or more than 10 connections, those requests may be dropped and an <code>HTTP 429</code> error code returned.</p>
<h1 id='authentication'>Authentication</h1>
<p>To start using the API, first register for an account by using the <code>/register</code> endpoint. Then use the <code>/login</code> endpoint to obtain an access token. You can then use your token to access the remainder of our endpoints. WattTime expects a token to be included in all API requests to the server. Your access token will expire after 30 minutes and you&#39;ll need to sign in again to obtain a fresh one.</p>
<h2 id='create-new-user-account'>Create New User Account</h2>
<blockquote>
<p>To register, use this code:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">register_url</span> <span class="o">=</span> <span class="s">'https://api2.watttime.org/v2/register'</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s">'username'</span><span class="p">:</span> <span class="s">'USERNAME'</span><span class="p">,</span>
         <span class="s">'password'</span><span class="p">:</span> <span class="s">'my_special_password'</span><span class="p">,</span>
         <span class="s">'email'</span><span class="p">:</span> <span class="s">'some_email@gmail.com'</span><span class="p">,</span>
         <span class="s">'org'</span><span class="p">:</span> <span class="s">'some org name'</span><span class="p">}</span>
<span class="n">rsp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">register_url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">rsp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">--data-binary</span> <span class="s1">'{"username":"freddo", "password":"the_frog", "email":"freddo@frog.org", "org":"freds world"}'</span> https://api2.watttime.org/v2/register
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"freddo"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ok"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User created"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='register'><code>/register</code></h3>
<p>Provide basic information to self register for an account. Higher level access is via subscription and can be requested at <code>support@watttime.org</code>.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api2.watttime.org/v2/register</code></p>
<h3 id='url-query-parameters'>URL Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>username (required)</td>
<td>name of user that will be used in subsequent calls</td>
<td>freddo</td>
<td>string</td>
</tr>
<tr>
<td>password (required)</td>
<td>user password</td>
<td>the_frog</td>
<td>string</td>
</tr>
<tr>
<td>email (required)</td>
<td>valid email address</td>
<td>freddo@frog.org</td>
<td>string</td>
</tr>
<tr>
<td>organization</td>
<td>organization name</td>
<td>freds world</td>
<td>string</td>
</tr>
</tbody></table>

<aside class="success">
Make sure to only register once! 
</aside>
<h2 id='obtain-access-token'>Obtain Access Token</h2>
<blockquote>
<p>To register, use this code:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">requests.auth</span> <span class="kn">import</span> <span class="n">HTTPBasicAuth</span>
<span class="n">login_url</span> <span class="o">=</span> <span class="s">'https://api2.watttime.org/v2/login'</span>
<span class="n">rsp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">login_url</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">HTTPBasicAuth</span><span class="p">(</span><span class="s">'USERNAME'</span><span class="p">,</span> <span class="s">'PASSWORD'</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">rsp</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--basic</span> <span class="nt">-u</span> USERNAME:PASSWORD https://api2.watttime.org/v2/login
</code></pre></div>
<blockquote>
<p>The above command returns your personal token, in JSON structure like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdef0123456789fedcabc"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div><h3 id='login'><code>/login</code></h3>
<p>Use HTTP basic auth to exchange username and password for an access token. Tokens are used in all subsequent data calls. </p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET https://api2.watttime.org/v2/login/</code></p>
<h3 id='url-query-parameters-2'>URL Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>none</td>
<td>uses basic authentication</td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>token</td>
<td>abcdef0123456789fedcabc</td>
</tr>
</tbody></table>

<aside class="success">
Token expires after 30 minutes. If a data call returns 401, you will need to login again to receive a new token.

</aside>
<h2 id='password-reset'>Password Reset</h2>
<blockquote>
<p>To reset your password, use this code:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">password_url</span> <span class="o">=</span> <span class="s">'https://api2.watttime.org/v2/password/?username=USERNAME'</span>
<span class="n">rsp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">password_url</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">rsp</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api2.watttime.org/v2/password/?username=USERNAME"</span>
</code></pre></div>
<blockquote>
<p>Sample Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"ok"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Please check your email for the password reset link"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div><h3 id='password'><code>/password</code></h3>
<p>Provide your username to request an email be sent to you with password reset instructions.  </p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET https://api2.watttime.org/v2/password/?username=freddo</code></p>
<h3 id='url-query-parameters-3'>URL Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Example</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>freddo</td>
<td>string</td>
</tr>
</tbody></table>
<h3 id='response-2'>Response</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>&quot;ok&quot;</td>
<td>Message confirming reset link has been sent</td>
<td>string</td>
</tr>
</tbody></table>
<h1 id='grid-emissions-information'>Grid Emissions Information</h1><h2 id='determine-grid-region'>Determine Grid Region</h2>
<blockquote>
<p>Make sure to add in your registered USERNAME and PASSWORD to this code. You should not add in your token here. The code automatically generates a new token each time you run it.</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">requests.auth</span> <span class="kn">import</span> <span class="n">HTTPBasicAuth</span>

<span class="n">login_url</span> <span class="o">=</span> <span class="s">'https://api2.watttime.org/v2/login'</span>
<span class="n">token</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">login_url</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">HTTPBasicAuth</span><span class="p">(</span><span class="s">'USERNAME'</span><span class="p">,</span> <span class="s">'PASSWORD'</span><span class="p">)).</span><span class="n">json</span><span class="p">()[</span><span class="s">'token'</span><span class="p">]</span>

<span class="n">region_url</span> <span class="o">=</span> <span class="s">'https://api2.watttime.org/v2/ba-from-loc'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer {}'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">token</span><span class="p">)}</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s">'latitude'</span><span class="p">:</span> <span class="s">'42.372'</span><span class="p">,</span> <span class="s">'longitude'</span><span class="p">:</span> <span class="s">'-72.519'</span><span class="p">}</span>
<span class="n">rsp</span><span class="o">=</span><span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">region_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">rsp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"Authorization: Bearer abcdef0123456789fedcabc"</span> https://api2.watttime.org/v2/ba-from-loc?latitude<span class="o">=</span>42.372&amp;longitude<span class="o">=</span><span class="nt">-72</span>.519
</code></pre></div>
<blockquote>
<p>Sample Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"id"</span><span class="p">:</span><span class="mi">169</span><span class="p">,</span><span class="w">
</span><span class="nl">"abbrev"</span><span class="p">:</span><span class="s2">"ISONE_WCMA"</span><span class="p">,</span><span class="w">
</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"ISONE Western/Central Massachusetts"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='ba-from-loc'><code>/ba-from-loc</code></h3>
<p>This endpoint, provided a latitude and longitude parameter, returns the enclosing balancing authority details if known, or an &quot;Invalid Coordinates&quot; error if the point lies outside of known BAs. For more information on what a balancing authority is, see <a href="https://www.eia.gov/todayinenergy/detail.php?id=27152">this explanation</a> from the EIA.</p>

<p>See <a href="https://www.watttime.org/explorer/#3/41.23/-97.64">map coverage</a> for available grid regions.</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>GET https://api2.watttime.org/v2/ba-from-loc/?latitude=42.372&amp;longitude=-72.519</code></p>
<h3 id='url-query-parameters-4'>URL Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>latitude</td>
<td>Latitude of location</td>
<td>42.372</td>
<td>float</td>
</tr>
<tr>
<td>longitude</td>
<td>Longitude of location</td>
<td>-72.519</td>
<td>float</td>
</tr>
</tbody></table>

<aside class="warning">
Locations not associated with a known balancing authority will return a <code>HTTP code 400</code>.
</aside>
<h3 id='response-3'>Response</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>ba</td>
<td>Balancing authority abbreviation</td>
<td>NYISO</td>
<td>string</td>
</tr>
<tr>
<td>id</td>
<td>Unique id for the region</td>
<td>8</td>
<td>integer</td>
</tr>
<tr>
<td>name</td>
<td>Human readable name/description for the region</td>
<td>New York ISO</td>
<td>string</td>
</tr>
</tbody></table>
<h2 id='realtime-emissions'>Realtime Emissions</h2><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">requests.auth</span> <span class="kn">import</span> <span class="n">HTTPBasicAuth</span>

<span class="n">login_url</span> <span class="o">=</span> <span class="s">'https://api2.watttime.org/v2/login'</span>
<span class="n">token</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">login_url</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">HTTPBasicAuth</span><span class="p">(</span><span class="s">'USERNAME'</span><span class="p">,</span> <span class="s">'PASSWORD'</span><span class="p">)).</span><span class="n">json</span><span class="p">()[</span><span class="s">'token'</span><span class="p">]</span>

<span class="n">index_url</span> <span class="o">=</span> <span class="s">'https://api2.watttime.org/index'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer {}'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">token</span><span class="p">)}</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s">'ba'</span><span class="p">:</span> <span class="s">'CAISO_ZP26'</span><span class="p">}</span>
<span class="n">rsp</span><span class="o">=</span><span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">index_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">rsp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"Authorization: Bearer abcdef0123456789fedcabc"</span> https://api2.watttime.org/v2/index?ba<span class="o">=</span>CAISO_ZP26&amp;style<span class="o">=</span>all
</code></pre></div>
<blockquote>
<p>Sample Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"freq"</span><span class="p">:</span><span class="w"> </span><span class="s2">"300"</span><span class="p">,</span><span class="w">   
    </span><span class="nl">"ba"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MISO_MI"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"percent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"53"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"moer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"982.65"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"point_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-29T14:55:00.00Z"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='index'><code>/index</code></h3>
<p>Provides a real-time signal indicating the carbon intensity on the local grid in that moment (typically updated every 5 minutes). The current emissions rate of the grid is returned as a raw Marginal Operating Emissions Rate (MOER) value (available only to users with PRO subscriptions), or as an index value (percent), which is available to all users. This value is returned along with a ‘freq’ value, indicating how long the value is in effect. The type of value returned is set by the &#39;style&#39; query parameter.  </p>

<p>The <em>MOER</em> value is the lbs of CO2 per MWh produced on the grid in the specified region. The reported index <em>percent</em> is where the current MOER is between the min and max from the last two weeks. </p>

<aside class="success">
Please use this endpoint for all real-time emissions queries and do not use the <code>/data</code> endpoint for this purpose unless required.  
</aside>

<aside class="success">
For retrieving historical emissions rates, we recommend using raw MOER values from the <code>/data</code> or <code>/historical</code> endpoints.
</aside>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>GET https://api2.watttime.org/v2/index</code></p>
<h3 id='url-query-parameters-5'>URL Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>ba</td>
<td>Balancing authority abbreviation. Optional - provide ba OR provide latitude+longitude, not all three</td>
<td>CAISO_ZP26</td>
<td>string</td>
</tr>
<tr>
<td>latitude</td>
<td>Latitude of location</td>
<td>42.372</td>
<td>float</td>
</tr>
<tr>
<td>longitude</td>
<td>Longitude of location</td>
<td>-72.519</td>
<td>float</td>
</tr>
<tr>
<td>style</td>
<td>Units in which to provide realtime marginal emissions. <strong>Choices are &#39;percent&#39;, &#39;moer&#39; or &#39;all&#39;</strong>. If you have PRO access you may use &#39;moer&#39; to get the latest raw MOER value. Defaults to &#39;all&#39; if not provided</td>
<td>all</td>
<td>string</td>
</tr>
</tbody></table>
<h3 id='response-4'>Response</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>freq</td>
<td>Duration from point_time for when new value is expected (in seconds)</td>
<td>300</td>
<td>string</td>
</tr>
<tr>
<td>ba</td>
<td>Balancing authority abbreviation</td>
<td>CAISO_ZP26</td>
<td>string</td>
</tr>
<tr>
<td>percent</td>
<td>An integer between 0 (minimum MOER in the last two weeks i.e. clean) and 100 (maximum MOER in the last two weeks i.e. dirty) representing the relative realtime marginal emissions intensity.</td>
<td>53</td>
<td>integer</td>
</tr>
<tr>
<td>moer</td>
<td>Marginal Operating Emissions Rate (MOER) measured in lbs CO2/MWh. This is only available for PRO subscriptions</td>
<td>850.743</td>
<td>float</td>
</tr>
<tr>
<td>point_time</td>
<td>ISO8601 UTC date/time format indicating when this data became valid</td>
<td>2019-01-29T14:55:00.00Z</td>
<td>string</td>
</tr>
</tbody></table>
<h2 id='grid-data'>Grid Data</h2><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">requests.auth</span> <span class="kn">import</span> <span class="n">HTTPBasicAuth</span>

<span class="n">login_url</span> <span class="o">=</span> <span class="s">'https://api2.watttime.org/v2/login'</span>
<span class="n">token</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">login_url</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">HTTPBasicAuth</span><span class="p">(</span><span class="s">'USERNAME'</span><span class="p">,</span> <span class="s">'PASSWORD'</span><span class="p">)).</span><span class="n">json</span><span class="p">()[</span><span class="s">'token'</span><span class="p">]</span>

<span class="n">data_url</span> <span class="o">=</span> <span class="s">'https://api2.watttime.org/v2/data'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer {}'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">token</span><span class="p">)}</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s">'ba'</span><span class="p">:</span> <span class="s">'CAISO_ZP26'</span><span class="p">,</span> 
          <span class="s">'starttime'</span><span class="p">:</span> <span class="s">'2019-02-20T16:00:00-0800'</span><span class="p">,</span> 
          <span class="s">'endtime'</span><span class="p">:</span> <span class="s">'2019-02-20T16:15:00-0800'</span><span class="p">}</span>
<span class="n">rsp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">data_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">rsp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"Authorization: Bearer abcdef0123456789fedcabc"</span> https://api2.watttime.org/v2/data?ba<span class="o">=</span>CAISO_NP15&amp;starttime<span class="o">=</span>2019-02-20T16:00:00-0800&amp;endtime<span class="o">=</span>2019-02-20T16:15:00-0800
</code></pre></div>
<blockquote>
<p>Sample Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
</span><span class="p">{</span><span class="nl">"point_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-21T00:15:00.000Z"</span><span class="p">,</span><span class="w"> </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">844</span><span class="p">,</span><span class="w"> </span><span class="nl">"frequency"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RTM"</span><span class="p">,</span><span class="w"> </span><span class="nl">"ba"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CAISO_ZP26"</span><span class="p">,</span><span class="w"> </span><span class="nl">"datatype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MOER"</span><span class="p">,</span><span class="w"> </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.1.1"</span><span class="p">},</span><span class="w"> 
</span><span class="p">{</span><span class="nl">"point_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-21T00:10:00.000Z"</span><span class="p">,</span><span class="w"> </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">834</span><span class="p">,</span><span class="w"> </span><span class="nl">"frequency"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RTM"</span><span class="p">,</span><span class="w"> </span><span class="nl">"ba"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CAISO_ZP26"</span><span class="p">,</span><span class="w"> </span><span class="nl">"datatype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MOER"</span><span class="p">,</span><span class="w"> </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.1.1"</span><span class="p">},</span><span class="w"> 
</span><span class="p">{</span><span class="nl">"point_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-21T00:05:00.000Z"</span><span class="p">,</span><span class="w"> </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">834</span><span class="p">,</span><span class="w"> </span><span class="nl">"frequency"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RTM"</span><span class="p">,</span><span class="w"> </span><span class="nl">"ba"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CAISO_ZP26"</span><span class="p">,</span><span class="w"> </span><span class="nl">"datatype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MOER"</span><span class="p">,</span><span class="w"> </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.1.1"</span><span class="p">},</span><span class="w"> 
</span><span class="p">{</span><span class="nl">"point_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-21T00:00:00.000Z"</span><span class="p">,</span><span class="w"> </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">844</span><span class="p">,</span><span class="w"> </span><span class="nl">"frequency"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RTM"</span><span class="p">,</span><span class="w"> </span><span class="nl">"ba"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CAISO_ZP26"</span><span class="p">,</span><span class="w"> </span><span class="nl">"datatype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MOER"</span><span class="p">,</span><span class="w"> </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.1.1"</span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div><h3 id='data'><code>/data</code></h3>
<p>Obtain historical marginal emissions for a given area (balancing authority abbreviated code) or location (latitude/longitude pair).  </p>

<p>Access to this endpoint is restricted to customers with ANALYST or PRO subscriptions. However, you can preview the data provided by using grid region <code>CAISO_ZP26</code> for your requests.</p>

<aside class="success">
Individual queries are limited to 30 days of data. If you need to download multiple months or years of data, consider using the <code>/historical</code> endpoint or request multiple days of data for each query (do not query every 5-minute datapoint individually).
</aside>

<aside class="success">
Provide <code>ba</code> OR provide <code>latitude+longitude</code>, not all three. If all are supplied, only the <code>ba</code> value is used. 
</aside>

<aside class="success">
Starttime/endtime values are in <code>ISO8601</code> format or <code>RFC2822</code> format. Generally <code>ISO8601</code> formats are preferred.
</aside>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>GET https://api2.watttime.org/v2/data/?ba=CAISO_ZP26&amp;latitude=35.0&amp;longitude=120.0&amp;starttime=2019-02-20T16:00:00-0800&amp;endtime=2019-02-20T16:15:00-0800&amp;style=all&amp;moerversion=2.1.1</code></p>
<h3 id='url-query-parameters-6'>URL Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>ba</td>
<td>Balancing authority abbreviation</td>
<td>CAISO_ZP26</td>
<td>string</td>
</tr>
<tr>
<td>latitude</td>
<td>Latitude of location</td>
<td>42.372</td>
<td>float</td>
</tr>
<tr>
<td>longitude</td>
<td>Longitude of location</td>
<td>-72.519</td>
<td>float</td>
</tr>
<tr>
<td>starttime</td>
<td>ISO 8601 timestamp (inclusive) - may be omitted if endtime is also omitted. If both are omitted, returns the most recent data point.</td>
<td>2019-02-20T16:00:00-0800</td>
<td>string</td>
</tr>
<tr>
<td>endtime</td>
<td>ISO 8601 timestamp (inclusive) - if endtime is omitted, endtime is equal to</td>
<td>2019-02-20T16:15:00-0800</td>
<td>string</td>
</tr>
<tr>
<td>style</td>
<td>Style of data to provide. Optional - can be all or moer. Defaults to all if omitted.</td>
<td>all</td>
<td>string</td>
</tr>
<tr>
<td>moerversion</td>
<td>MOERversion. Defaults to the latest version for a given region if omitted. Omit this field unless you need to request a particular version.</td>
<td>2.1.1</td>
<td>string</td>
</tr>
</tbody></table>
<h3 id='response-5'>Response</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>ba</td>
<td>Balancing authority abbreviation</td>
<td>CAISO_ZP26</td>
<td>string</td>
</tr>
<tr>
<td>datatype</td>
<td>Type of data</td>
<td>MOER</td>
<td>string</td>
</tr>
<tr>
<td>frequency</td>
<td>Duration in seconds for which the data is valid from point_time</td>
<td>300</td>
<td>integer</td>
</tr>
<tr>
<td>market</td>
<td>Market type, only useful for grid data</td>
<td>RTM</td>
<td>string</td>
</tr>
<tr>
<td>point_time</td>
<td>ISO8601 UTC date/time format indicating when this data became valid</td>
<td>2019-01-29T14:55:00.00Z</td>
<td>string</td>
</tr>
<tr>
<td>value</td>
<td>Number value of data (corresponding to datatype above)</td>
<td>909.06</td>
<td>float</td>
</tr>
<tr>
<td>version</td>
<td>MOER version (Not present and not applicable for other datatypes)</td>
<td>2.0</td>
<td>string</td>
</tr>
</tbody></table>
<h2 id='historical-emissions'>Historical Emissions</h2><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">path</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">requests.auth</span> <span class="kn">import</span> <span class="n">HTTPBasicAuth</span>

<span class="n">login_url</span> <span class="o">=</span> <span class="s">'https://api2.watttime.org/v2/login'</span>
<span class="n">token</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">login_url</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">HTTPBasicAuth</span><span class="p">(</span><span class="s">'USERNAME'</span><span class="p">,</span> <span class="s">'PASSWORD'</span><span class="p">)).</span><span class="n">json</span><span class="p">()[</span><span class="s">'token'</span><span class="p">]</span>

<span class="n">historical_url</span> <span class="o">=</span> <span class="s">'https://api2.watttime.org/v2/historical'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer {}'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">token</span><span class="p">)}</span>
<span class="n">ba</span> <span class="o">=</span> <span class="s">'CAISO_ZP26'</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s">'ba'</span><span class="p">:</span> <span class="n">ba</span><span class="p">}</span>
<span class="n">rsp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">historical_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
<span class="n">cur_dir</span> <span class="o">=</span> <span class="n">path</span><span class="p">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">path</span><span class="p">.</span><span class="n">realpath</span><span class="p">(</span><span class="s">'__file__'</span><span class="p">))</span>
<span class="n">file_path</span> <span class="o">=</span> <span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">cur_dir</span><span class="p">,</span> <span class="s">'{}_historical.zip'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">ba</span><span class="p">))</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s">'wb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
    <span class="n">fp</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">rsp</span><span class="p">.</span><span class="n">content</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">'Wrote historical data for {} to {}'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">ba</span><span class="p">,</span> <span class="n">file_path</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"Authorization: Bearer abcdef0123456789fedcabc"</span> https://api2.watttime.org/v2/historical?ba<span class="o">=</span>CAISO_NP15&amp;version<span class="o">=</span>latest
</code></pre></div>
<blockquote>
<p>Sample Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="err">Content-Type:application/zip</span><span class="w">
</span></code></pre></div><h3 id='historical'><code>/historical</code></h3>
<p>Obtain a zip file containing the MOER values and timestamps for a given region for (up to) the past two years.  </p>

<p>WattTime periodically updates the algorithms used to calculate new MOERs to add new features, incorporate new data sources, or in response to changing grid dynamics. This endpoint provides you with the option to retrieve all the MOER versions published for a given region or to retrieve only the most up-to-date version.  </p>

<p>Historical data will be updated on the 2nd of each month at midnight UTC for the previous month. </p>

<p>Access to this endpoint is restricted to customers with ANALYST or PRO subscriptions.  </p>

<aside class="success">
Please note that this endpoint will return binary data (representing a zip file) which needs to be saved to disk and then unzipped (or unzipped programmatically) in order to obtain human readable csv files containing the MOER values.
</aside>
<h3 id='http-request-7'>HTTP Request</h3>
<p><code>GET https://api2.watttime.org/v2/historical</code></p>
<h3 id='url-query-parameters-7'>URL Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>ba</td>
<td>Balancing authority abbreviation</td>
<td>MISO_MI</td>
<td>string</td>
</tr>
<tr>
<td>version</td>
<td>Optional: MOER version to retrieve. Options are latest for the most up-to-date version or all for all versions. Defaults to latest.</td>
<td>all</td>
<td>string</td>
</tr>
</tbody></table>
<h3 id='response-6'>Response</h3>
<table><thead>
<tr>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>A binary zip file payload containing MOERs for the specified balancing authority for the past two years. Save the body to disk and unzip it.</td>
<td>Binary Data Zip File</td>
</tr>
</tbody></table>
<h2 id='marginal-emissions-forecast'>Marginal Emissions Forecast</h2><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">requests.auth</span> <span class="kn">import</span> <span class="n">HTTPBasicAuth</span>

<span class="n">login_url</span> <span class="o">=</span> <span class="s">'https://api2.watttime.org/v2/login'</span>
<span class="n">token</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">login_url</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">HTTPBasicAuth</span><span class="p">(</span><span class="s">'USERNAME'</span><span class="p">,</span> <span class="s">'PASSWORD'</span><span class="p">)).</span><span class="n">json</span><span class="p">()[</span><span class="s">'token'</span><span class="p">]</span>

<span class="n">forecast_url</span> <span class="o">=</span> <span class="s">'https://api2.watttime.org/v2/forecast'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer {}'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">token</span><span class="p">)}</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s">'ba'</span><span class="p">:</span> <span class="s">'CAISO_NP15'</span><span class="p">,</span> 
          <span class="s">'starttime'</span><span class="p">:</span> <span class="s">'2019-02-20T16:45:30-0800'</span><span class="p">,</span> 
          <span class="s">'endtime'</span><span class="p">:</span> <span class="s">'2019-02-20T17:45:30-0800'</span><span class="p">}</span>
<span class="n">rsp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">forecast_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">rsp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--include</span> <span class="se">\</span>
     <span class="nt">--header</span> <span class="s2">"Authorization: Bearer &lt;Access_Token&gt;"</span> <span class="se">\</span>
  <span class="s1">'https://api2.watttime.org/v2/forecast/?ba='</span>
</code></pre></div>
<blockquote>
<p>Sample Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"generated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-29T20:00:00.000Z"</span><span class="p">,</span><span class="w"> 
    </span><span class="nl">"forecast"</span><span class="p">:</span><span class="w"> 
      </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"point_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-29T20:05:00.000Z"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"ba"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MISO_IN"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1350</span><span class="p">,</span><span class="w">
          </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"point_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-29T20:10:00.000Z"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"ba"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MISO_IN"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1300</span><span class="p">,</span><span class="w">
          </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">},</span><span class="w">
         </span><span class="err">.....</span><span class="w"> </span><span class="err">&lt;</span><span class="mi">24</span><span class="w"> </span><span class="err">hours</span><span class="w"> </span><span class="err">worth</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">datapoints&gt;</span><span class="w">
      </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div><h3 id='forecast'><code>/forecast</code></h3>
<p>Obtain MOER forecast data for a given region. Omitting the starttime and endtime parameters will return the most recently generated forecast for a given region. Use the starttime and endtime parameters to obtain historical forecast data.  </p>

<p>Note that starttime and endtime define the time when a forecast was <strong>generated</strong>. Every five minutes, WattTime generates a new forecast which (depending on the region) is between 8 and 24 hours in duration. So, if you make a request to the forecast endpoint with starttime of Jan 1, 1:00 and endtime Jan 1, 1:05, you will receive the forecast (all 288 values in the forecast window) generated at 1:00, and the forecast generated at 1:05 on January 1.  </p>

<p>Access to this endpoint is restricted to customers with PRO subscriptions.</p>

<aside class="success">
Historical forecast queries are limited to a maximum time span of 1 day. If you want to query more data than that, please break up your request into multiple queries.
</aside>
<h3 id='http-request-8'>HTTP Request</h3>
<p><code>GET https://api2.watttime.org/v2/forecast</code></p>
<h3 id='url-query-parameters-8'>URL Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>ba</td>
<td>Balancing authority abbreviation</td>
<td>CAISO_ZP26</td>
<td>string</td>
</tr>
<tr>
<td>starttime</td>
<td>ISO 8601 timestamp (inclusive) - Omit to obtain the real-time forecast. If included, those forecasts generated between start and endtime are returned.</td>
<td>2019-02-20T16:45:30-0800</td>
<td>string</td>
</tr>
<tr>
<td>endtime</td>
<td>ISO 8601 timestamp (inclusive)- Omit to obtain the real-time forecast. If included, those forecasts generated between start and endtime are returned.</td>
<td>2019-02-20T17:45:30-0800</td>
<td>string</td>
</tr>
</tbody></table>
<h3 id='response-7'>Response</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
<th>Example</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>generated_at</td>
<td>ISO 8601 timestamp for when the forecast was generated</td>
<td>2019-01-29T14:55:00.000Z</td>
<td>string</td>
</tr>
<tr>
<td>forecast</td>
<td>List of forecasts - see below</td>
<td></td>
<td>object</td>
</tr>
</tbody></table>

<p>The value of the ‘forecast’ key is a list of dictionaries containing the following keys:</p>

<table><thead>
<tr>
<th>Key</th>
<th>Description</th>
<th>Example</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>ba</td>
<td>Balancing authority abbreviation</td>
<td>CAISO_ZP26</td>
<td>string</td>
</tr>
<tr>
<td>point_time</td>
<td>ISO8601 UTC date/time format indicating when this data became valid</td>
<td>2019-01-29T14:55:00.00Z</td>
<td>string</td>
</tr>
<tr>
<td>value</td>
<td>MOER value (corresponding to datatype above)</td>
<td>909.06</td>
<td>float</td>
</tr>
<tr>
<td>version</td>
<td>MOER version (Not present and not applicable for other datatypes)</td>
<td>2.0</td>
<td>string</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="Python3">Python3</a>
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
